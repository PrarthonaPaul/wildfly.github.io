<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<meta name="author" content="Alexey Loubyansky, Jean-Francois Denise">
<title>WildFly Galleon Plugins Documentation</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>WildFly Galleon Plugins Documentation</h1>
<div class="details">
<span id="author" class="author">Alexey Loubyansky, Jean-Francois Denise</span><br>
<span id="revnumber">version 7.0.0.Final,</span>
<span id="revdate">2024-04-11T08:43:23Z</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_maven_plugins">1.1. Maven plugins</a></li>
<li><a href="#_galleon_plugins">1.2. Galleon plugins</a></li>
</ul>
</li>
<li><a href="#_building_a_custom_feature_pack_example">2. Building a custom feature-pack example</a>
<ul class="sectlevel2">
<li><a href="#_setting_up_maven_project">2.1. Setting up Maven project</a></li>
<li><a href="#_expressing_a_dependency_on_wildfly">2.2. Expressing a dependency on WildFly</a></li>
<li><a href="#_source_structure">2.3. Source structure</a></li>
<li><a href="#_defining_jboss_modules_modules">2.4. Defining JBoss Modules modules</a></li>
<li><a href="#_defining_packages">2.5. Defining packages</a></li>
<li><a href="#_defining_layers">2.6. Defining layers</a></li>
<li><a href="#_defining_feature_groups">2.7. Defining feature groups</a></li>
<li><a href="#_building_your_feature_pack">2.8. Building your feature-pack</a></li>
<li><a href="#_making_your_feature_pack_available">2.9. Making your feature-pack available</a></li>
<li><a href="#_provisioning_your_feature_pack">2.10. Provisioning your feature-pack</a></li>
</ul>
</li>
<li><a href="#_maven_plugin">3. Maven plugin</a>
<ul class="sectlevel2">
<li><a href="#_goals_overview">3.1. Goals overview</a></li>
<li><a href="#_generate_all_artifacts_list">3.2. generate-all-artifacts-list</a></li>
<li><a href="#_build_user_feature_pack">3.3. build-user-feature-pack</a></li>
<li><a href="#_build_feature_pack">3.4. build-feature-pack</a></li>
<li><a href="#Feature-pack-build-config-file">3.5. Feature-pack build config file (wildfly-feature-pack-build.xml)</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>&#169; 2021 The original authors.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>WildFly Galleon Plugins project includes Galleon plugin and Maven plugin implementations that are dedicated to
building feature-packs (including generation of feature specs, packages and other resources) for WildFly releases and provisioning of WildFly-based distributions.
These plugins can also be used by projects that integrate into or extend WildFly.</p>
</div>
<div class="sect2">
<h3 id="_maven_plugins">1.1. Maven plugins</h3>
<div class="paragraph">
<p>This Maven tooling allows to build feature-packs that can be combined with WildFly feature-packs to produce customized WildFly server installations.</p>
</div>
<div class="paragraph">
<p>The Maven plugin "org.wildfly.galleon:wildfly-galleon-maven-plugin" exposes 2 goals:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>build-feature-pack</code>: A goal to be used by WildFly developers when defining WildFly feature-packs that
implement new WidFly subsystems and expose new server capabilities.</p>
</li>
<li>
<p><code>build-user-feature-pack</code>: A goal to be used by WildFly server users in order to define new Layers, new JBoss Modules, &#8230;&#8203; that depend on existing WildFly
subsystems and capabilities.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_galleon_plugins">1.2. Galleon plugins</h3>
<div class="paragraph">
<p>During provisioning, a WildFly specific Galleon plugin is executed to install the WildFly server.
This plugin can be configured with a set of options in order to tune the WildFly server installation.
The way to provide these options is tool specific.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For the <a href="https://github.com/wildfly/galleon/">Galleon</a> CLI command line tool: the options are exposed using completion (TAB key) for the <code>install</code> command.
Options can also be set in the <code>provisioning.xml</code> file when using the <code>provision</code> command. A <code>provisioning.xml</code> file example:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&lt;installation xmlns=&quot;urn:jboss:galleon:provisioning:3.0&quot;&gt;
    &lt;feature-pack location=&quot;wildfly@maven(org.jboss.universe:community-universe):current&quot;/&gt;
    &lt;options&gt;
        &lt;option name=&quot;jboss-fork-embedded&quot; value=&quot;false&quot;/&gt;
        &lt;option name=&quot;jboss-maven-dist&quot;/&gt;
    &lt;/options&gt;
&lt;/installation&gt;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>For the <a href="https://github.com/wildfly/galleon/">Galleon</a> Maven plugin configuration: The <code>&lt;plugin-options&gt;</code> element contains the options as XML elements.
For example:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&lt;configuration&gt;
...
 &lt;plugin-options&gt;
  &lt;jboss-fork-embedded&gt;true&lt;/jboss-fork-embedded&gt;
 &lt;/plugin-options&gt;
...
&lt;/configuration&gt;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>For the <a href="https://github.com/wildfly/wildfly-maven-plugin/">WildFly Maven plugin</a> configuration: The <code>&lt;galleon-options&gt;</code> element contains the options as XML elements.
For example:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&lt;configuration&gt;
...
 &lt;galleon-options&gt;
  &lt;jboss-fork-embedded&gt;true&lt;/jboss-fork-embedded&gt;
 &lt;/galleon-options&gt;
...
&lt;/configuration&gt;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>For the <a href="https://github.com/wildfly-extras/wildfly-jar-maven-plugin/">WildFly Bootable JAR Maven plugin</a> configuration: The <code>&lt;plugin-options&gt;</code> element contains the options as XML elements.
For example:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&lt;configuration&gt;
...
 &lt;plugin-options&gt;
  &lt;jboss-fork-embedded&gt;true&lt;/jboss-fork-embedded&gt;
 &lt;/plugin-options&gt;
...
&lt;/configuration&gt;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>For the <a href="https://github.com/wildfly-extras/prospero">prospero</a> tool, you can define a <code>provisioning.xml</code> file that contains the options.
A <code>provisioning.xml</code> file example:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&lt;installation xmlns=&quot;urn:jboss:galleon:provisioning:3.0&quot;&gt;
    &lt;feature-pack location=&quot;wildfly@maven(org.jboss.universe:community-universe):current&quot;/&gt;
    &lt;options&gt;
        &lt;option name=&quot;jboss-fork-embedded&quot; value=&quot;false&quot;/&gt;
        &lt;option name=&quot;jboss-maven-dist&quot;/&gt;
    &lt;/options&gt;
&lt;/installation&gt;</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_installation_plugin_options">1.2.1. Installation Plugin options</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Option</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">jboss-bulk-resolve-artifacts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maven artifacts that are needed for the WildFly server installation are resolved in a bulk operation instead of
being resolved individually. That can speed-up the provisioning time.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">jboss-dump-config-scripts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NONE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A path to a directory in which WildFly CLI script files used to generate the server configurations are stored.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">jboss-fork-embedded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fork in a separate process the generation of the server configuration files. Server configuration generation implies the usage of a WildFly Embedded server.
It is advised to set this env variable to true, specially when having multiple executions of the provisioning inside the
same process (e.g.: multiple executions of Galleon|WildFly|Bootable JAR Maven plugins).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">jboss-maven-dist</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provision a thin WildFly server installation with JBoss Modules modules jar resolved from Maven local cache
and not copied to the <code>modules</code> directory.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">jboss-maven-repo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NONE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A path to a directory in which all the resolved Maven artifacts jars and associated pom files are stored.
The generated directory complies with the filesystem layout of a Maven repository. This respository can then be used as the local cache
of a thin WildFly server (see <code>jboss-maven-dist</code> option).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">jboss-overridden-artifacts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'|' separated list of maven coordinates in the following syntax: GroupId:ArtifactId:Version:[Classifier:]Extension</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NONE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A list of Maven artifact coordinates used to override the artifact versions that are defined in the provisioned WildFly feature-pack.
For example, to override undertow-core: <code>io.undertow:undertow-core:2.3.1.Final::jar</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">jboss-reset-embedded-system-properties</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma-separated list of String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NONE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When executing a forked process to generate the server configuration, all system properties defined in the parent process are inherited by the forked process.
Setting this property to an empty value will reset the system properties used by WildFly server during startup.
To reset WildFly specific system properties and some additional properties, add to the comma-separated list the names of system property to reset.
To not reset a WildFly specific system property, add the property name prefixed with <code>-</code> to the list.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">jboss-resolved-artifacts-cache</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NONE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A path to a directory where to cache the resolved Maven artifacts that are not part of the server installation (feature-packs, Galleon plugins, &#8230;&#8203;).
NOTE: This option is specific to the usage of the <a href="https://github.com/wildfly-extras/prospero">prospero</a> provisioning tool.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_building_a_custom_feature_pack_example">2. Building a custom feature-pack example</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Defining your own Galleon feature-packs allow you to create customized WildFly server installation containing
your custom content and trimmed to your need. In this example we are seeing how to setup a Maven project
to create a Galleon feature-pack that contains Galleon layers to install static web content, a JDBC driver and a datasource.</p>
</div>
<div class="sect2">
<h3 id="_setting_up_maven_project">2.1. Setting up Maven project</h3>
<div class="paragraph">
<p>Call the following command to create an empty Maven project:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">mvn archetype:generate -DarchetypeGroupId=org.codehaus.mojo.archetypes \
-DarchetypeArtifactId=pom-root -DgroupId=org.example.demo \
-DartifactId=my-custom-galleon-pack -DinteractiveMode=false</code></pre>
</div>
</div>
<div class="paragraph">
<p>N.B.: The type of packaging of your pom.xml project file must be  <code>&lt;packaging&gt;pom&lt;/packaging&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Add the Maven plugin dependency in your pom.xml file :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;dependencies&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;dependency&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;groupId&gt;</span>org.wildfly.galleon-plugins<span style="color:#070;font-weight:bold">&lt;/groupId&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;artifactId&gt;</span>wildfly-galleon-maven-plugin<span style="color:#070;font-weight:bold">&lt;/artifactId&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;version&gt;</span>7.0.0.Final<span style="color:#070;font-weight:bold">&lt;/version&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;/dependency&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/dependencies&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Integrate the plugin in your build element:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"> <span style="color:#070;font-weight:bold">&lt;build&gt;</span>
   <span style="color:#070;font-weight:bold">&lt;plugins&gt;</span>
     <span style="color:#070;font-weight:bold">&lt;plugin&gt;</span>
       <span style="color:#070;font-weight:bold">&lt;groupId&gt;</span>org.wildfly.galleon-plugins<span style="color:#070;font-weight:bold">&lt;/groupId&gt;</span>
       <span style="color:#070;font-weight:bold">&lt;artifactId&gt;</span>wildfly-galleon-maven-plugin<span style="color:#070;font-weight:bold">&lt;/artifactId&gt;</span>
       <span style="color:#070;font-weight:bold">&lt;executions&gt;</span>
         <span style="color:#070;font-weight:bold">&lt;execution&gt;</span>
           <span style="color:#070;font-weight:bold">&lt;id&gt;</span>myproject-galleon-pack-build<span style="color:#070;font-weight:bold">&lt;/id&gt;</span>
           <span style="color:#070;font-weight:bold">&lt;goals&gt;</span>
             <span style="color:#070;font-weight:bold">&lt;goal&gt;</span>build-user-feature-pack<span style="color:#070;font-weight:bold">&lt;/goal&gt;</span>
           <span style="color:#070;font-weight:bold">&lt;/goals&gt;</span>
           <span style="color:#070;font-weight:bold">&lt;phase&gt;</span>compile<span style="color:#070;font-weight:bold">&lt;/phase&gt;</span>
         <span style="color:#070;font-weight:bold">&lt;/execution&gt;</span>
       <span style="color:#070;font-weight:bold">&lt;/executions&gt;</span>
     <span style="color:#070;font-weight:bold">&lt;/plugin&gt;</span>
   <span style="color:#070;font-weight:bold">&lt;/plugins&gt;</span>
 <span style="color:#070;font-weight:bold">&lt;/build&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_expressing_a_dependency_on_wildfly">2.2. Expressing a dependency on WildFly</h3>
<div class="paragraph">
<p>A feature-pack has a dependency on WildFly feature-pack, this dependency is resolved from the project pom file.
Add the WildFly Galleon feature-pack dependency to the project dependencies section:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;dependency&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;groupId&gt;</span>org.wildfly<span style="color:#070;font-weight:bold">&lt;/groupId&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;artifactId&gt;</span>wildfly-galleon-pack<span style="color:#070;font-weight:bold">&lt;/artifactId&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;version&gt;</span>26.0.0.Final<span style="color:#070;font-weight:bold">&lt;/version&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;type&gt;</span>zip<span style="color:#070;font-weight:bold">&lt;/type&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Expressing a dependency on WildFly 26.0.0.Final doesn&#8217;t mean that the feature-pack is limited to be used in conjunction with WildFly 26.0.0.Final.
When provisioning your feature-pack with a WildFly feature-pack, the version of the WildFly feature-pack present in the provisioning will get used.
This means that your feature-pack is usable with future WildFly release (WildFly guarantee backward compatibility there).</p>
</div>
</div>
<div class="sect2">
<h3 id="_source_structure">2.3. Source structure</h3>
<div class="paragraph">
<p>Create the directory <code>src/main/resources</code>, it will contain the content of your feature-pack.
The <code>resources</code> directory can contain the following sub-directories:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>configs</code>: contains default configurations provided by this feature-pack.</p>
</li>
<li>
<p><code>feature_groups</code>: contains feature groups, a reusable unit that contains the server configuration content that can then be referenced from layers and configurations.</p>
</li>
<li>
<p><code>layers</code>: contains layers, a layer reflects the content and configuration of a WildFly server capability that are provisioned when the layer is used.</p>
</li>
<li>
<p><code>modules</code>: contains JBoss Modules modules you want to see packaged in the feature-pack. JBoss Modules modules can then be referenced from layers and configurations.</p>
</li>
<li>
<p><code>packages</code>: contains packages, a package contains content you want to see installed in the server (eg: properties files, keystores, tools, scripts,&#8230;&#8203;).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In this example we are adding <code>feature_groups</code>, <code>layers</code>, <code>modules</code> and <code>packages</code> to our custom WildFly feature-pack.</p>
</div>
</div>
<div class="sect2">
<h3 id="_defining_jboss_modules_modules">2.4. Defining JBoss Modules modules</h3>
<div class="paragraph">
<p>JBoss Modules modules can be referenced from Galleon layers and/or feature-groups using the module name. e.g.: <code>org.mariadb.jdbc</code>.</p>
</div>
<div class="paragraph">
<p>Under the <code>modules</code> directory create a directory path identical to the one we would find under the <code>JBOSS_HOME/modules</code> directory.</p>
</div>
<div class="paragraph">
<p>For this example create the directory <code>src/main/resources/modules/org/mariadb/jdbc/main</code> that will contain the <code>module.xml</code> file.
NB: The actual JAR files that implement the module are NOT packaged inside the feature-pack, the JAR files are retrieved from Maven at provisioning time.</p>
</div>
<div class="paragraph">
<p>The <code>module.xml</code> file content is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;module</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">org.mariadb.jdbc</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">urn:jboss:module:1.8</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
   <span style="color:#070;font-weight:bold">&lt;resources&gt;</span>
       <span style="color:#777">&lt;!-- Expression to retrieve the mariadb driver artifact from Maven. The version must be expressed in the feature-pack pom.xml dependencies--&gt;</span>
       <span style="color:#070;font-weight:bold">&lt;artifact</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">${org.mariadb.jdbc:mariadb-java-client}</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
   <span style="color:#070;font-weight:bold">&lt;/resources&gt;</span>
   <span style="color:#777">&lt;!-- The JDBC driver depends on the following API --&gt;</span>
   <span style="color:#070;font-weight:bold">&lt;dependencies&gt;</span>
       <span style="color:#070;font-weight:bold">&lt;module</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">javax.api</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
       <span style="color:#070;font-weight:bold">&lt;module</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">javax.transaction.api</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
   <span style="color:#070;font-weight:bold">&lt;/dependencies&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/module&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The pom.xml of your feature-pack project must also contain the actual dependency on the <code>org.mariadb.jdbc:mariadb-java-client</code> Maven artifact.</p>
</div>
<div class="paragraph">
<p>Add the following dependency to the project dependencies:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;dependency&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;groupId&gt;</span>org.mariadb.jdbc<span style="color:#070;font-weight:bold">&lt;/groupId&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;artifactId&gt;</span>mariadb-java-client<span style="color:#070;font-weight:bold">&lt;/artifactId&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;version&gt;</span>2.7.2<span style="color:#070;font-weight:bold">&lt;/version&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>We are done defining the <code>org.mariadb.jdbc</code> JBoss Modules module. This module will get installed when the Galleon layer
that references it is used. We will see that later when provisioning the custom feature-pack.</p>
</div>
</div>
<div class="sect2">
<h3 id="_defining_packages">2.5. Defining packages</h3>
<div class="paragraph">
<p>For each package you are defining, under the directory <code>src/main/resources/packages/</code> create a directory with the name of the package.
The usual package directory structure is:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>packages/&lt;package_name&gt;
|- content/
|- pm/
|  `- wildfly/
|     `- tasks.xml
`- package.xml</pre>
</div>
</div>
<div class="paragraph">
<p>The file <code>package.xml</code> is required, it contains the package name. Optionally it can contain the dependencies on other packages
that would get installed when this package is provisioned.</p>
</div>
<div class="paragraph">
<p>XML syntax for the <code>package.xml</code> is covered by this <a href="https://github.com/wildfly/galleon/blob/master/core/src/main/resources/schema/galleon-package-2_0.xsd">XML schema</a>.</p>
</div>
<div class="paragraph">
<p>Create the directory <code>src/main/resources/packages/my-web-server-content</code>.</p>
</div>
<div class="paragraph">
<p>The file <code>src/main/resources/packages/my-web-server-content/package.xml</code> content is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;package-spec</span> <span style="color:#b48">xmlns</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">urn:jboss:galleon:package:2.0</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">my-web-server-content</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>content</code> directory includes content that will be copied to the installation root directory when the package is installed.</p>
</div>
<div class="paragraph">
<p>Create the directory <code>src/main/resources/packages/my-web-server-content/content/my-web-server-content</code>. It will contain our static web content.</p>
</div>
<div class="paragraph">
<p>Create the file <code>src/main/resources/packages/my-web-server-content/content/my-web-server-content/index.html</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;html&gt;</span>
<span style="color:#070;font-weight:bold">&lt;body&gt;</span>
<span style="color:#070;font-weight:bold">&lt;h1&gt;</span>Hello World<span style="color:#070;font-weight:bold">&lt;/h1&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/body&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Create the file <code>src/main/resources/packages/my-web-server-content/content/my-web-server-content/Error404.html</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;html&gt;</span>
<span style="color:#070;font-weight:bold">&lt;body&gt;</span>
<span style="color:#070;font-weight:bold">&lt;h1&gt;</span>Resource not found!<span style="color:#070;font-weight:bold">&lt;/h1&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/body&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When the package <code>my-web-server-content</code> is provisioned (because referenced from a Galleon layer), the directory <code>my-web-server-content</code> will get installed in
the server.</p>
</div>
<div class="paragraph">
<p><code>pm/wildfly/tasks.xml</code> file is optional, it may include instructions to copy and/or delete files and directories,
create directories, resolve and copy Maven artifacts to the installation directory, etc.
These tasks are executed when the content of all the packages has been copied into the installation.</p>
</div>
<div class="paragraph">
<p>The tasks <a href="https://raw.githubusercontent.com/wildfly/galleon-plugins/master/maven-plugin/src/main/resources/schema/wildfly-feature-pack-tasks-3_0.xsd">XML schema</a> contains the definition of the tasks you can add to the tasks.xml file.
This <a href="https://raw.githubusercontent.com/wildfly/galleon-plugins/master/maven-plugin/src/test/resources/xml/tasks.xml">example</a> of tasks.xml file contains the set of tasks one can use in a tasks.xml file.</p>
</div>
<div class="paragraph">
<p>In the context of this example we don&#8217;t need to define a <code>tasks.xml</code> file.</p>
</div>
</div>
<div class="sect2">
<h3 id="_defining_layers">2.6. Defining layers</h3>
<div class="paragraph">
<p>One powerful aspect of Galleon are layers. By provisioning layers you can create a trimmed WildFly server containing only the set
of features (server configuration and JBoss Modules modules) required by your application.</p>
</div>
<div class="paragraph">
<p>WildFly comes with a set of <a href="https://docs.wildfly.org/26/Galleon_Guide.html#wildfly_layers">Galleon layers</a> that allows you to provision
a trimmed server containing subsystems configured in a way that is nearly identical to the default configuration (as found in standalone*.xml configuration).</p>
</div>
<div class="paragraph">
<p>In order to fine tune the trimmed server configuration, WildFly CLI tool can be an approach. Running CLI scripts
imply to execute the CLI tool on each provisioned server instance.</p>
</div>
<div class="paragraph">
<p>By defining your own Galleon layers, you can provision a server already fully configured without the need for extra CLI script execution.</p>
</div>
<div class="paragraph">
<p>XML syntax for layers is covered by this <a href="https://github.com/wildfly/galleon/blob/master/core/src/main/resources/schema/galleon-layer-1_0.xsd">XML schema</a>.</p>
</div>
<div class="paragraph">
<p>A layer allows you to package inside a single artifact (the layer) some server configuration item (eg: subsystem configuration) and
content (eg: JBoss Modules modules).</p>
</div>
<div class="paragraph">
<p>A good example is the JDBC driver. When adding a JDBC driver to a wildfly installation we are generally
updating the datasources subsystem and add a JBoss Module module.</p>
</div>
<div class="paragraph">
<p>Now for each layer you are defining, create a directory with the name of the layer. Each directory contains a single file named <code>layer-spec.xml</code> that contains the
actual content of the layer.</p>
</div>
<div class="sect3">
<h4 id="_my_undertow_handler_layer_example">2.6.1. <code>my-undertow-handler</code> layer example</h4>
<div class="paragraph">
<p>This layer configures undertow subsystem to serve the static content, sets a 404 handler and references
the <code>my-web-server-content</code> package.</p>
</div>
<div class="paragraph">
<p>Create the directory <code>src/main/resources/layers/standalone/my-undertow-handler</code>.</p>
</div>
<div class="paragraph">
<p>Create the file <code>src/main/resources/layers/standalone/my-undertow-handler/layer-spec.xml</code> with the following content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;layer-spec</span> <span style="color:#b48">xmlns</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">urn:jboss:galleon:layer-spec:1.0</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">my-undertow-handler</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
  <span style="color:#777">&lt;!-- features are added to the server configuration --&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;feature</span> <span style="color:#b48">spec</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">subsystem.undertow.server</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">server</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">default-server</span><span style="color:#710">&quot;</span></span> <span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;feature</span> <span style="color:#b48">spec</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">subsystem.undertow.server.host</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
       <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">host</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">default-host</span><span style="color:#710">&quot;</span></span> <span style="color:#070;font-weight:bold">/&gt;</span>
       <span style="color:#070;font-weight:bold">&lt;feature</span> <span style="color:#b48">spec</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">subsystem.undertow.server.host.location</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
         <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">location</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">/web</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
         <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">handler</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">my-web-server-content</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
       <span style="color:#070;font-weight:bold">&lt;/feature&gt;</span>
       <span style="color:#070;font-weight:bold">&lt;feature</span> <span style="color:#b48">spec</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">subsystem.undertow.server.host.filter-ref</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
         <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">filter-ref</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">404-handler</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
         <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">predicate</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">true</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
       <span style="color:#070;font-weight:bold">&lt;/feature&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/feature&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;/feature&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;feature</span> <span style="color:#b48">spec</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">subsystem.undertow.configuration.handler.file</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">file</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">my-web-server-content</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">path</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">${jboss.home.dir}/my-web-server-content</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">directory-listing</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">true</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;/feature&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;feature</span> <span style="color:#b48">spec</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">subsystem.undertow.configuration.filter.error-page</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">error-page</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">404-handler</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">code</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">404</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">path</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">${jboss.home.dir}/my-web-server-content/Error404.html</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;/feature&gt;</span>

  <span style="color:#777">&lt;!-- Packages content is installed inside the server --&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;packages&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;package</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">my-web-server-content</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;/packages&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/layer-spec&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You will notice that a layer contains <code>feature</code>. You can see features as server Management resources. The <code>spec</code> attribute
can be derived from the resource path used in JBoss CLI commands. The following CLI operations would have
the same effect than the features instantiated in this layer:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>/subsystem=undertow/configuration=handler/file=my-web-server-content:add(path=&quot;${jboss.home.dir}/my-web-server-content&quot;, directory-listing=true)
/subsystem=undertow/configuration=filter/error-page=404-handler:add(path=&quot;${jboss.home.dir}/my-web-server-content/Error404.html&quot;, code=404)
/subsystem=undertow/server=default-server/host=default-host/location=&quot;/web&quot;:add(handler=my-web-server-content)
/subsystem=undertow/server=default-server/host=default-host/filter-ref=404-handler:add(predicate=true)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_mariadb_driver_layer_example">2.6.2. <code>mariadb-driver</code> layer example</h4>
<div class="paragraph">
<p>This layer contains the configuration for a <code>mariadb</code> JDBC driver.</p>
</div>
<div class="paragraph">
<p>Create the directory <code>src/main/resources/layers/standalone/mariadb-driver</code>.</p>
</div>
<div class="paragraph">
<p>Create the file <code>src/main/resources/layers/standalone/mariadb-driver/layer-spec.xml</code> with the following content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;layer-spec</span> <span style="color:#b48">xmlns</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">urn:jboss:galleon:layer-spec:1.0</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">mariadb-driver</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
  <span style="color:#777">&lt;!-- Add the driver to the datasources subsystem --&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;feature</span> <span style="color:#b48">spec</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">subsystem.datasources</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;feature</span> <span style="color:#b48">spec</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">subsystem.datasources.jdbc-driver</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">driver-name</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">mariadb</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">jdbc-driver</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">mariadb</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">driver-xa-datasource-class-name</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">org.mariadb.jdbc.MariaDbDataSource</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">driver-module-name</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">org.mariadb.jdbc</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/feature&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;/feature&gt;</span>

  <span style="color:#777">&lt;!-- Will install the JBoss Modules org.mariadb.jdbc module. --&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;packages&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;package</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">org.mariadb.jdbc</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;/packages&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/layer-spec&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following CLI operations would have the same effect than the features instantiated in this layer:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>/subsystem=datasources/jdbc-driver=mariadb:add(driver-name=mariadb, \
driver-module-name=org.mariadb.jdbc, \
driver-xa-datasource-class-name=org.mariadb.jdbc.MariaDbDataSource)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_mariadb_datasource_layer_example">2.6.3. <code>mariadb-datasource</code> layer example</h4>
<div class="paragraph">
<p>A layer that adds a <code>MariaDBDS</code> datasource that is bound to the <code>mariadb</code> driver. This layer adds the
ability to configure the datasource (host, port, database, username, password) thanks to environment variables that can be be set at server run-time.</p>
</div>
<div class="paragraph">
<p>Create the directory <code>src/main/resources/layers/standalone/mariadb-datasource</code>.</p>
</div>
<div class="paragraph">
<p>Create the file <code>src/main/resources/layers/standalone/mariadb-datasource/layer-spec.xml</code> with the following content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;layer-spec</span> <span style="color:#b48">xmlns</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">urn:jboss:galleon:layer-spec:1.0</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">mariadb-datasource</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>

  <span style="color:#777">&lt;!-- express a dependency on the driver layer to have it automatically provisioned when mariadb-datasource is provisioned --&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;dependencies&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;layer</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">mariadb-driver</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;/dependencies&gt;</span>

  <span style="color:#070;font-weight:bold">&lt;feature</span> <span style="color:#b48">spec</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">subsystem.datasources.data-source</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">data-source</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">MariaDBDS</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">jndi-name</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">java:jboss/datasources/${env.MARIADB_DATASOURCE:MariaDBDS}</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">connection-url</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">jdbc:mariadb://${env.MARIADB_HOST:localhost}:${env.MARIADB_PORT:3306}/${env.MARIADB_DATABASE}</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">driver-name</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">mariadb</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">user-name</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">${env.MARIADB_USER}</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">password</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">${env.MARIADB_PASSWORD}</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;/feature&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/layer-spec&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following CLI operations would have the same effect than what we have expressed in this layer:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>/subsystem=datasources/data-source=MariaDBDS:add(jndi-name=&quot;java:jboss/datasources/${env.MARIADB_DATASOURCE:MariaDBDS}&quot;, \
connection-url=&quot;jdbc:mariadb://${env.MARIADB_HOST:localhost}:${env.MARIADB_PORT:3306}/${env.MARIADB_DATABASE}&quot;, \
driver-name=mariadb, user-name=&quot;${env.MARIADB_USER}&quot;, password=&quot;${env.MARIADB_PASSWORD}&quot;)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_defining_feature_groups">2.7. Defining feature groups</h3>
<div class="paragraph">
<p>XML syntax for feature-groups is covered by this <a href="https://github.com/wildfly/galleon/blob/master/core/src/main/resources/schema/galleon-feature-group-1_0.xsd">XML schema</a>.</p>
</div>
<div class="paragraph">
<p>A feature-group is contained inside an xml file located inside the <code>src/main/resources/feature_groups</code>. The XML file name is the name of the feature-group.</p>
</div>
<div class="paragraph">
<p>A feature-group allows you to group feature instantiation inside a group that can then be referenced from other groups or layers.</p>
</div>
<div class="paragraph">
<p>We could have chosen to define the undertow handler in a feature group and reference it from the layer.</p>
</div>
<div class="paragraph">
<p>The content of the <code>src/main/resources/feature_groups/my-undertow-handler-grp.xml</code> feature-group would look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>

<span style="color:#070;font-weight:bold">&lt;feature-group-spec</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">my-undertow-handler-grp</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">urn:jboss:galleon:feature-group:1.0</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
  <span style="color:#777">&lt;!-- features are added to the server configuration --&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;feature</span> <span style="color:#b48">spec</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">subsystem.undertow.server</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">server</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">default-server</span><span style="color:#710">&quot;</span></span> <span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;feature</span> <span style="color:#b48">spec</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">subsystem.undertow.server.host</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
       <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">host</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">default-host</span><span style="color:#710">&quot;</span></span> <span style="color:#070;font-weight:bold">/&gt;</span>
       <span style="color:#070;font-weight:bold">&lt;feature</span> <span style="color:#b48">spec</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">subsystem.undertow.server.host.location</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
         <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">location</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">/web</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
         <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">handler</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">my-web-server-content</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
       <span style="color:#070;font-weight:bold">&lt;/feature&gt;</span>
       <span style="color:#070;font-weight:bold">&lt;feature</span> <span style="color:#b48">spec</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">subsystem.undertow.server.host.filter-ref</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
         <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">filter-ref</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">404-handler</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
         <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">predicate</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">true</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
       <span style="color:#070;font-weight:bold">&lt;/feature&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/feature&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;/feature&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;feature</span> <span style="color:#b48">spec</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">subsystem.undertow.configuration.handler.file</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">file</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">my-web-server-content</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">path</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">${jboss.home.dir}/my-web-server-content</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">directory-listing</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">true</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;/feature&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;feature</span> <span style="color:#b48">spec</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">subsystem.undertow.configuration.filter.error-page</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">error-page</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">404-handler</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">code</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">404</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">path</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">${jboss.home.dir}/my-web-server-content/Error404.html</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;/feature&gt;</span>

  <span style="color:#777">&lt;!-- Packages content is installed inside the server --&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;packages&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;package</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">my-web-server-content</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;/packages&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/feature-group-spec&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, from the <code>my-undertow-handler</code> layer, we could have referenced the feature-group instead of the features:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>

<span style="color:#070;font-weight:bold">&lt;layer-spec</span> <span style="color:#b48">xmlns</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">urn:jboss:galleon:layer-spec:1.0</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">my-undertow-handler</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;feature-group</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">my-undertow-handler-grp</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/layer-spec&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_building_your_feature_pack">2.8. Building your feature-pack</h3>
<div class="paragraph">
<p>This is done by calling <code>mvn clean install</code> in the maven project. A zip artifact <code>org.example.demo:my-custom-galleon-pack:1.0-SNAPSHOT</code>
is built and installed in the maven local cache. This feature-pack artifact is what will get used when provisioning a WildFly server.</p>
</div>
</div>
<div class="sect2">
<h3 id="_making_your_feature_pack_available">2.9. Making your feature-pack available</h3>
<div class="paragraph">
<p>For local development and testing, having the feature-pack installed in the Maven local cache is all what you need. In order to share your feature-pack, it has to
be deployed in remote Maven repositories.</p>
</div>
</div>
<div class="sect2">
<h3 id="_provisioning_your_feature_pack">2.10. Provisioning your feature-pack</h3>
<div class="paragraph">
<p>The same feature-pack can be used to provision a server using different tooling. Usage is not limited to bare-metal, feature-packs can be used to
provision custom WildFly server on the cloud. Main tools to provision custom WildFly servers are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/wildfly-extras/wildfly-jar-maven-plugin/">WildFly Bootable JAR Maven plugin, bare metal and cloud</a></p>
</li>
<li>
<p><a href="https://github.com/wildfly/wildfly-maven-plugin/">WildFly Maven plugin, bare metal and cloud</a></p>
</li>
<li>
<p><a href="https://docs.wildfly.org/galleon/#_maven_plugin">Galleon Maven plugin, bare-metal</a></p>
</li>
<li>
<p><a href="https://docs.wildfly.org/galleon/#_galleon_cli_tool">Galleon command line tool, bare-metal</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_wildfly_bootable_jar_maven_plugin">2.10.1. WildFly Bootable JAR Maven plugin</h4>
<div class="paragraph">
<p>We will not go into all the details of how to provision a Bootable JAR, the <a href="https://docs.wildfly.org/bootablejar/">Bootable JAR documentation</a>
covers it in detail. We are here showing plugin configuration extract in which we are referencing our custom feature-pack and layers.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;plugin&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;groupId&gt;</span>org.wildfly.plugins<span style="color:#070;font-weight:bold">&lt;/groupId&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;artifactId&gt;</span>wildfly-jar-maven-plugin<span style="color:#070;font-weight:bold">&lt;/artifactId&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;configuration&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;feature-packs&gt;</span>
            <span style="color:#777">&lt;!-- the List of feature-packs to use during provisioning. Always provide WildFly feature-pack as the first one. --&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;feature-pack&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;groupId&gt;</span>org.wildfly<span style="color:#070;font-weight:bold">&lt;/groupId&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;artifactId&gt;</span>wildfly-galleon-pack<span style="color:#070;font-weight:bold">&lt;/artifactId&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;version&gt;</span>26.0.0.Final<span style="color:#070;font-weight:bold">&lt;/version&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;/feature-pack&gt;</span>
            <span style="color:#777">&lt;!-- Our custom feature-pack --&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;feature-pack&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;groupId&gt;</span>org.example.demo<span style="color:#070;font-weight:bold">&lt;/groupId&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;artifactId&gt;</span>my-custom-galleon-pack<span style="color:#070;font-weight:bold">&lt;/artifactId&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;version&gt;</span>1.0-SNAPSHOT<span style="color:#070;font-weight:bold">&lt;/version&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;/feature-pack&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;/feature-packs&gt;</span>
        <span style="color:#777">&lt;!-- Layers in use to provision the server --&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;layers&gt;</span>
            <span style="color:#777">&lt;!-- WildFly layer that provides web + support for datasources --&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;layer&gt;</span>datasources-web-server<span style="color:#070;font-weight:bold">&lt;/layer&gt;</span>
            <span style="color:#777">&lt;!-- The custom layers we have defined --&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;layer&gt;</span>mariadb-datasource<span style="color:#070;font-weight:bold">&lt;/layer&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;layer&gt;</span>my-undertow-handler<span style="color:#070;font-weight:bold">&lt;/layer&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;/layers&gt;</span>
        ...</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_wildfly_maven_plugin">2.10.2. WildFly Maven plugin</h4>
<div class="paragraph">
<p>The configuration of feature-packs and layers is identical to the one we have seen in the Bootable JAR chapter.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_maven_plugin">3. Maven plugin</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter is dedicated to the Maven plugin that can be used to build WildFly-based feature-packs. Maven
coordinates of the Maven plugin artifact are</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Maven plugin installing feature-packs and provisioning distributions is a part of Galleon project itself. Please, refer to
Galleon documentation for more information.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;dependency&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;groupId&gt;</span>org.wildfly.galleon-plugins<span style="color:#070;font-weight:bold">&lt;/groupId&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;artifactId&gt;</span>wildfly-galleon-maven-plugin<span style="color:#070;font-weight:bold">&lt;/artifactId&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;version&gt;</span>7.0.0.Final<span style="color:#070;font-weight:bold">&lt;/version&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_goals_overview">3.1. Goals overview</h3>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_generate_all_artifacts_list">generate-all-artifacts-list</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generates a list of all the artifacts required to install the full version of a feature-pack.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_build_user_feature_pack">build-user-feature-pack</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Creates feature-packs intended to be built on top WildFly feature-packs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_build_feature_pack">build-feature-pack</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Creates a feature-pack archive from the provided resources in the WildFly fashion (used for official WildFly feature-packs).</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_generate_all_artifacts_list">3.2. generate-all-artifacts-list</h3>
<div class="sect3">
<h4 id="_wildfly_galleongenerate_all_artifacts_list">3.2.1. wildfly-galleon:generate-all-artifacts-list</h4>
<div class="paragraph">
<p><strong>Full name:</strong>
org.wildfly.galleon-plugins:wildfly-galleon-maven-plugin:7.0.0.Final:generate-all-artifacts-list</p>
</div>
</div>
<div class="sect3">
<h4 id="_description">3.2.2. Description</h4>
<div class="paragraph">
<p>Aggregate all artifact lists (offliners) of a feature-pack
dependencies. In addition adds to the list the feature-pack itself
and universe artifacts. The resulting list is attached as an
artifact to the current project. If output-licenses-file is set, a
license file for the contained artifacts is generated.</p>
</div>
</div>
<div class="sect3">
<h4 id="_attributes">3.2.3. Attributes</h4>
<div class="ulist">
<ul>
<li>
<p>Requires a Maven project to be executed.</p>
</li>
<li>
<p>Requires dependency resolution of artifacts in scope: <code>runtime</code>.</p>
</li>
<li>
<p>Binds by default to the <a href="http://maven.apache.org/ref/current/maven-core/lifecycles.html">lifecycle phase</a>: <code>compile</code>.</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all fit-content stretch">
<caption class="title">Table 1. Required Parameters</caption>
<colgroup>
<col>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Since</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#fpArtifactId">[fpArtifactId]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(no description)<br>
<strong>Alias is</strong>: <code>feature-pack-artifact-id</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#fpGroupId">[fpGroupId]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(no description)<br>
<strong>Alias is</strong>: <code>feature-pack-group-id</code>.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all fit-content stretch">
<caption class="title">Table 2. Optional Parameters</caption>
<colgroup>
<col>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Since</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#excludedVersions">[excludedVersions]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(no description)<br>
<strong>Alias is</strong>: <code>excluded-licenses-versions</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#extraArtifacts">[extraArtifacts]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(no description)<br>
<strong>Alias is</strong>: <code>extra-artifacts</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#fpVersion">[fpVersion]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(no description)<br>
<strong>Alias is</strong>: <code>feature-pack-version</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#licensesFile">[licensesFile]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(no description)<br>
<strong>Alias is</strong>: <code>output-licenses-file</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#offline">[offline]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(no description)<br>
<strong>Default value is</strong>: <code>false</code>.<br>
<strong>Alias is</strong>: <code>offline</code>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_parameter_details">3.2.4. Parameter Details</h4>
<div class="paragraph">
<p><a id="excludedVersions"></a> <strong>excludedVersions</strong><br>
(no description)</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.lang.String</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>excluded-licenses-versions</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="extraArtifacts"></a> <strong>extraArtifacts</strong><br>
(no description)</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.util.List</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>extra-artifacts</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="fpArtifactId"></a> <strong>fpArtifactId</strong><br>
(no description)</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.lang.String</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>Yes</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>feature-pack-artifact-id</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="fpGroupId"></a> <strong>fpGroupId</strong><br>
(no description)</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.lang.String</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>Yes</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>feature-pack-group-id</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="fpVersion"></a> <strong>fpVersion</strong><br>
(no description)</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.lang.String</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>feature-pack-version</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="licensesFile"></a> <strong>licensesFile</strong><br>
(no description)</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.lang.String</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>output-licenses-file</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="offline"></a> <strong>offline</strong><br>
(no description)</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>boolean</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>Default</strong>: <code>false</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>offline</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_build_user_feature_pack">3.3. build-user-feature-pack</h3>
<div class="sect3">
<h4 id="_wildfly_galleonbuild_user_feature_pack">3.3.1. wildfly-galleon:build-user-feature-pack</h4>
<div class="paragraph">
<p><strong>Full name:</strong>
org.wildfly.galleon-plugins:wildfly-galleon-maven-plugin:7.0.0.Final:build-user-feature-pack</p>
</div>
</div>
<div class="sect3">
<h4 id="_description_2">3.3.2. Description</h4>
<div class="paragraph">
<p>This Maven Mojo is intended to be used to build feature-packs that
depend on one of the WildFly feature-packs. This Maven mojo creates
a WildFly style feature-pack archive from the provided resources
according to the feature-pack build configuration file and attaches
it to the current Maven project as an artifact. If no feature-pack
build configuration is provided, some defaults are applied. The
content of the future feature-pack archive is first created in the
directory called <code>feature-pack-layout</code> under the module&#8217;s build
directory which is then ZIPped to create the feature-pack artifact.</p>
</div>
</div>
<div class="sect3">
<h4 id="_attributes_2">3.3.3. Attributes</h4>
<div class="ulist">
<ul>
<li>
<p>Requires a Maven project to be executed.</p>
</li>
<li>
<p>Requires dependency resolution of artifacts in scope: <code>runtime</code>.</p>
</li>
<li>
<p>Binds by default to the <a href="http://maven.apache.org/ref/current/maven-core/lifecycles.html">lifecycle phase</a>: <code>compile</code>.</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all fit-content stretch">
<caption class="title">Table 3. Required Parameters</caption>
<colgroup>
<col>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Since</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#resourcesDir">[resourcesDir]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represents the directory containing child directories
<code>packages</code>, <code>feature_groups</code>,
<code>modules</code> etc. Either an absolute path or a path
relative to <code>configDir</code>.<br>
<strong>Default value is</strong>: <code>src/main/resources</code>.<br>
<strong>User property is</strong>: <code>wildfly.user.feature.pack.resourcesDir</code>.<br>
<strong>Alias is</strong>: <code>resources-dir</code>.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all fit-content stretch">
<caption class="title">Table 4. Optional Parameters</caption>
<colgroup>
<col>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Since</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#addFeaturePacksAsRequiredManifests">[addFeaturePacksAsRequiredManifests]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add any feature-pack dependency as a required manifest in the
manifest YAML definition. This parameter has no effect if
"generate-channel-manifest" is false.<br>
<strong>Default value is</strong>: <code>true</code>.<br>
<strong>Alias is</strong>: <code>add-feature-packs-as-required-manifests</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#buildName">[buildName]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The directory for the built artifact.<br>
<strong>Default value is</strong>: <code>${project.build.directory}</code>.<br>
<strong>User property is</strong>: <code>wildfly.user.feature.pack.buildName</code>.<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#configDir">[configDir]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>File</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The feature-pack build configuration file directory<br>
<strong>Default value is</strong>: <code>${basedir}</code>.<br>
<strong>User property is</strong>: <code>wildfly.user.feature.pack.configDir</code>.<br>
<strong>Alias is</strong>: <code>config-dir</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#configFile">[configFile]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The feature-pack build configuration file.<br>
<strong>Default value is</strong>: <code>wildfly-user-feature-pack-build.xml</code>.<br>
<strong>User property is</strong>: <code>wildfly.user.feature.pack.configFile</code>.<br>
<strong>Alias is</strong>: <code>config-file</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#configStatibilityLevel">[configStatibilityLevel]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The default stability level used at provisioning time to generate
configuration. Can&#8217;t be used when <code>stability-level</code> is
set.<br>
<strong>Alias is</strong>: <code>config-stability-level</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#deployChannelManifest">[deployChannelManifest]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(no description)<br>
<strong>Default value is</strong>: <code>true</code>.<br>
<strong>User property is</strong>: <code>wildfly.feature.pack.deploy-channel-manifest</code>.<br>
<strong>Alias is</strong>: <code>deploy-channel-manifest</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#fpLocation">[fpLocation]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The FPL for the generated feature-pack.<br>
<strong>Default value is</strong>: <code>${project.groupId}:${project.artifactId}:${project.version}</code>.<br>
<strong>Alias is</strong>: <code>feature-pack-location</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#generateChannelManifest">[generateChannelManifest]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generates a channel manifest YAML definition when the feature-pack
is produced. Any dependency from the feature pack is declared as a
stream in the channel manifest.<br>
<strong>Default value is</strong>: <code>false</code>.<br>
<strong>User property is</strong>: <code>wildfly.feature.pack.generate-channel-manifest</code>.<br>
<strong>Alias is</strong>: <code>generate-channel-manifest</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#minimumStabilityLevel">[minimumStabilityLevel]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The minimum stability level of the WildFly processes used to
generate feature specs and include packages. Set this if you need
to generate feature specs for features with a lower stability level
than the default level of the WildFly process being used for
feature-spec generation.<br>
<strong>Alias is</strong>: <code>minimum-stability-level</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#packageStatibilityLevel">[packageStatibilityLevel]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The default stability level used at provisioning time when
installing packages/JBoss Modules modules. Can&#8217;t be used when
<code>stability-level</code> is set.<br>
<strong>Alias is</strong>: <code>package-stability-level</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#releaseName">[releaseName]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the release the feature-pack represents which will be
stored in the feature-pack&#8217;s
<code>resources/wildfly/wildfly-tasks.properties</code> as
<code>product.release.name</code> property.<br>
<strong>Default value is</strong>: <code>${product.release.name}</code>.<br>
<strong>Alias is</strong>: <code>release-name</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#stabilityLevel">[stabilityLevel]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The default stability level used at provisioning time to generate
configuration and provision packages. Can&#8217;t be used when
<code>config-stability-level</code> or
<code>package-stability-level</code> is set.<br>
<strong>Alias is</strong>: <code>stability-level</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#taskProps">[taskProps]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Map</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Various properties that will be added to feature-pack&#8217;s
<code>resources/wildfly/wildfly-tasks.properties</code>.<br>
NOTE: values of this parameter will overwrite the corresponding
values from task-properties-file parameter, in case it&#8217;s also
set. +<br>
<strong>Alias is</strong>: <code>task-properties</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#taskPropsFile">[taskPropsFile]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>File</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to a properties file content of which will be added to
feature-pack&#8217;s <code>resources/wildfly/wildfly-tasks.properties</code> file
that is used as the source of properties during file copying tasks
with property replacement.<br>
<strong>Alias is</strong>: <code>task-properties-file</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#translateToFpl">[translateToFpl]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">By default generated build config dependencies are expressed using
GAV, set this parameter to true to generate FPL.<br>
<strong>Default value is</strong>: <code>false</code>.<br>
<strong>Alias is</strong>: <code>translate-to-fpl</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#wildflyChannelResolutionMode">[wildflyChannelResolutionMode]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WildFlyChannelResolutionMode</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Feature-pack WildFly channel resolution mode when WildFly channels
are configured in the provisioning tooling used to provision this
feature-pack. "NOT_REQUIRED" means that the feature-pack and
artifacts can be resolved without WildFly channels. "REQUIRED"
means that the feature-pack and all its artifacts must be only
resolved from WildFly channels. "REQUIRED_FP_ONLY" means that only
the feature-pack must be only resolved from WildFly channels.
Referenced artifacts can be resolved outside of configured WildFly
channels.<br>
<strong>Default value is</strong>: <code>NOT_REQUIRED</code>.<br>
<strong>User property is</strong>: <code>wildfly.feature.pack.require.channel.resolution</code>.<br>
<strong>Alias is</strong>: <code>wildfly-channel-resolution-mode</code>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_parameter_details_2">3.3.4. Parameter Details</h4>
<div class="paragraph">
<p><a id="addFeaturePacksAsRequiredManifests"></a> <strong>addFeaturePacksAsRequiredManifests</strong><br>
Add any feature-pack dependency as a required manifest in the
manifest YAML definition. This parameter has no effect if
"generate-channel-manifest" is false.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>boolean</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>Default</strong>: <code>true</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>add-feature-packs-as-required-manifests</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="buildName"></a> <strong>buildName</strong><br>
The directory for the built artifact.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.lang.String</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>wildfly.user.feature.pack.buildName</code></p>
</li>
<li>
<p><strong>Default</strong>: <code>${project.build.directory}</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="configDir"></a> <strong>configDir</strong><br>
The feature-pack build configuration file directory</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.io.File</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>wildfly.user.feature.pack.configDir</code></p>
</li>
<li>
<p><strong>Default</strong>: <code>${basedir}</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>config-dir</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="configFile"></a> <strong>configFile</strong><br>
The feature-pack build configuration file.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.lang.String</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>wildfly.user.feature.pack.configFile</code></p>
</li>
<li>
<p><strong>Default</strong>: <code>wildfly-user-feature-pack-build.xml</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>config-file</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="configStatibilityLevel"></a> <strong>configStatibilityLevel</strong><br>
The default stability level used at provisioning time to generate
configuration. Can&#8217;t be used when <code>stability-level</code> is
set.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.lang.String</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>config-stability-level</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="deployChannelManifest"></a> <strong>deployChannelManifest</strong><br>
(no description)</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>boolean</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>wildfly.feature.pack.deploy-channel-manifest</code></p>
</li>
<li>
<p><strong>Default</strong>: <code>true</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>deploy-channel-manifest</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="fpLocation"></a> <strong>fpLocation</strong><br>
The FPL for the generated feature-pack.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.lang.String</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>Default</strong>: <code>${project.groupId}:${project.artifactId}:${project.version}</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>feature-pack-location</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="generateChannelManifest"></a> <strong>generateChannelManifest</strong><br>
Generates a channel manifest YAML definition when the feature-pack
is produced. Any dependency from the feature pack is declared as a
stream in the channel manifest.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>boolean</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>wildfly.feature.pack.generate-channel-manifest</code></p>
</li>
<li>
<p><strong>Default</strong>: <code>false</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>generate-channel-manifest</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="minimumStabilityLevel"></a> <strong>minimumStabilityLevel</strong><br>
The minimum stability level of the WildFly processes used to
generate feature specs and include packages. Set this if you need
to generate feature specs for features with a lower stability level
than the default level of the WildFly process being used for
feature-spec generation.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.lang.String</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>minimum-stability-level</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="packageStatibilityLevel"></a> <strong>packageStatibilityLevel</strong><br>
The default stability level used at provisioning time when
installing packages/JBoss Modules modules. Can&#8217;t be used when
<code>stability-level</code> is set.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.lang.String</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>package-stability-level</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="releaseName"></a> <strong>releaseName</strong><br>
The name of the release the feature-pack represents which will be
stored in the feature-pack&#8217;s
<code>resources/wildfly/wildfly-tasks.properties</code> as
<code>product.release.name</code> property.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.lang.String</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>Default</strong>: <code>${product.release.name}</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>release-name</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="resourcesDir"></a> <strong>resourcesDir</strong><br>
Represents the directory containing child directories
<code>packages</code>, <code>feature_groups</code>,
<code>modules</code> etc. Either an absolute path or a path
relative to <code>configDir</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.lang.String</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>Yes</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>wildfly.user.feature.pack.resourcesDir</code></p>
</li>
<li>
<p><strong>Default</strong>: <code>src/main/resources</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>resources-dir</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="stabilityLevel"></a> <strong>stabilityLevel</strong><br>
The default stability level used at provisioning time to generate
configuration and provision packages. Can&#8217;t be used when
<code>config-stability-level</code> or
<code>package-stability-level</code> is set.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.lang.String</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>stability-level</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="taskProps"></a> <strong>taskProps</strong><br>
Various properties that will be added to feature-pack&#8217;s
<code>resources/wildfly/wildfly-tasks.properties</code>.<br>
NOTE: values of this parameter will overwrite the corresponding
values from task-properties-file parameter, in case it&#8217;s also
set.<br></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.util.Map</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>task-properties</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="taskPropsFile"></a> <strong>taskPropsFile</strong><br>
Path to a properties file content of which will be added to
feature-pack&#8217;s <code>resources/wildfly/wildfly-tasks.properties</code> file
that is used as the source of properties during file copying tasks
with property replacement.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.io.File</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>task-properties-file</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="translateToFpl"></a> <strong>translateToFpl</strong><br>
By default generated build config dependencies are expressed using
GAV, set this parameter to true to generate FPL.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.lang.Boolean</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>Default</strong>: <code>false</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>translate-to-fpl</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="wildflyChannelResolutionMode"></a> <strong>wildflyChannelResolutionMode</strong><br>
Feature-pack WildFly channel resolution mode when WildFly channels
are configured in the provisioning tooling used to provision this
feature-pack. "NOT_REQUIRED" means that the feature-pack and
artifacts can be resolved without WildFly channels. "REQUIRED"
means that the feature-pack and all its artifacts must be only
resolved from WildFly channels. "REQUIRED_FP_ONLY" means that only
the feature-pack must be only resolved from WildFly channels.
Referenced artifacts can be resolved outside of configured WildFly
channels.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>org.wildfly.galleon.plugin.WildFlyChannelResolutionMode</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>wildfly.feature.pack.require.channel.resolution</code></p>
</li>
<li>
<p><strong>Default</strong>: <code>NOT_REQUIRED</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>wildfly-channel-resolution-mode</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_plugin_configuration">3.3.5. Plugin configuration</h4>
<div class="sect5">
<h6 id="_dependency_on_wildfly">Dependency on WildFly</h6>
<div class="paragraph">
<p>The pom.xml of the project that makes use of this plugin must express a dependency on the WildFly feature-pack it is depending upon.</p>
</div>
</div>
<div class="sect4">
<h5 id="_feature_pack_configuration">Feature-pack configuration</h5>
<div class="paragraph">
<p>For typical user feature-packs construct (eg: package JBoss modules and define galleon layers),
there is no need to define a feature-pack build configuration file. Everything can be configured from
the plugin configuration element inside the pom.xml file.</p>
</div>
<div class="paragraph">
<p>For more advanced configuration, a file named <em>wildfly-user-feature-pack-build.xml</em> can be defined in the project root dir.
This file complies with the <em>wildfly-feature-pack-build.xml</em> <a href="#Feature-pack-build-config-file">file syntax</a>
but only supports a subset of it.</p>
</div>
<div class="paragraph">
<p>The following items can be defined:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Feature Pack Location of the feature-pack.</p>
</li>
<li>
<p>Dependencies (transitives or directs) on other feature-packs.</p>
</li>
<li>
<p>Default packages.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;build</span> <span style="color:#b48">xmlns</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">urn:wildfly:feature-pack-build:3.0</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">producer</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">org.foo:my-galleon-pack:1.0.0.Final</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;dependencies&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;dependency</span> <span style="color:#b48">location</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">wildfly@maven(org.jboss.universe:community-universe):current#17.0.0.Final</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;default-configs</span> <span style="color:#b48">inherit</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">false</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;packages</span> <span style="color:#b48">inherit</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">false</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;/dependency&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/dependencies&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;default-packages&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;package</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">my.package1</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/default-packages&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/build&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_galleon_feature_pack_content_that_can_be_defined_with_the_mojo">3.3.6. Galleon feature-pack content that can be defined with the mojo</h4>
<div class="sect4">
<h5 id="_jboss_module_packages">JBoss module packages</h5>
<div class="paragraph">
<p>The directory <code>src/main/resources/modules</code> contains JBoss modules to be turned into feature-pack packages. A package is created per JBoss module. JBoss module dependencies are reflected in the corresponding package dependencies.</p>
</div>
<div class="paragraph">
<p>A module can contain the binaries it wants to see installed or rely on the 'module.xml template' capability of the mojo.
For example, here is an excerpt from a <code>module.xml</code> template:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;module</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">org.postgresql.jdbc</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">urn:jboss:module:1.8</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;resources&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;artifact</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">${org.postgresql:postgresql}</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/resources&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;dependencies&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;module</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">javax.api</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;module</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">javax.transaction.api</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/dependencies&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/module&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It looks pretty much like the final <code>module.xml</code> except that the artifact name is an expression which should be replaced with either the complete artifact coordinates in case of a thin distribution, e.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;module</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">org.postgresql.jdbc</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">urn:jboss:module:1.8</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;resources&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;artifact</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">org.postgresql:postgresql:9.4.1211</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/resources&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;dependencies&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;module</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">javax.api</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;module</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">javax.transaction.api</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/dependencies&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/module&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the <code>resource-root</code> element in case of a fat distribution, e.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;module</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">org.postgresql.jdbc</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">urn:jboss:module:1.8</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;resources&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;resource-root</span> <span style="color:#b48">path</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">postgresql-9.4.1211.jar</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/resources&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;dependencies&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;module</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">javax.api</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;module</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">javax.transaction.api</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/dependencies&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>module.xml</code> template processing is happening at provisioning time and depends on the kind of distribution being provisioned.
That is controlled by the plugin option <code>jboss-maven-dist=true|false</code>. <code>true</code> to provision a thin installation, <code>false</code> to provision a fat installation.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you are packaging JBoss module using the "module.xml template" you must express the dependencies on the
actual artifacts you want to see provisioned in the pom.xml file.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
It is possible that a module depends on another module which is not found in the current feature-pack. In that case, the feature-pack that contains the package representing the module from the dependency must be declared as the dependency of the current feature-pack in the feature-pack build config file. If the dependency could not be resolved locally (among the modules included in the current feature-pack), the module will be looked up in the dependencies of the current feature-pack (in the order the dependencies are specified in the feature-pack build config file).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In case a module dependency could not be resolved neither locally nor in the feature-pack dependencies, an error will be thrown with the corresponding message.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The package generated for a JBoss module can still be customized by, e.g., adding <code>pm/wildfly/tasks.xml</code> to it in <code>src/main/resources/packages</code>. In this case the package dir in <code>src/main/resources/packages</code> has to include only the content that the generated package is missing. It doesn&#8217;t have to include <code>package.xml</code> unless the generated one has to be replaced with a custom one.
</td>
</tr>
</table>
</div>
<div class="sect5">
<h6 id="_custom_add_ons_and_layers_types_of_jboss_modules">Custom, add-ons and layers types of JBoss modules</h6>
<div class="ulist">
<ul>
<li>
<p>Custom modules are defined directly under <code>modules</code> directory.</p>
</li>
<li>
<p><code>add-ons</code> are defined under <code>modules/system/add-ons/&lt;add-on name&gt;</code> directory.</p>
</li>
<li>
<p><code>layers</code> are defined under <code>modules/system/layers/&lt;layer name&gt;</code> directory. You must also define the file <code>layers.conf</code> under <code>modules</code> directory.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_galleon_packages">Galleon packages</h5>
<div class="paragraph">
<p>The directory <code>src/main/resources/packages/</code> contains galleon packages. Packages contain content (other than JBoss modules)
you want to see provisioned along with a layer and/or configuration.</p>
</div>
<div class="paragraph">
<p>Documentation to help you define packages can be found <a href="https://docs.wildfly.org/galleon/#_feature_pack_packages">here</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_galleon_layers">Galleon Layers</h5>
<div class="paragraph">
<p>You can define your own layers (eg: drivers, datasources, customized subsystem)
that can be then assembled with WildFly built-in layers to compose a configuration.</p>
</div>
<div class="paragraph">
<p>The directory <code>src/main/resources/layers</code> contains the layers definitions.</p>
</div>
<div class="paragraph">
<p>Layers are defined for a given model of configuration. Configuration model can be one of <code>standalone</code>, <code>host</code> or <code>domain</code>.
The layers defined for a given configuration model are located inside a directory named with the configuration model:
<code>layers/&lt;config model name&gt;/&lt;layer name&gt;/layer-spec.xml</code></p>
</div>
<div class="paragraph">
<p>Example of a layer that defines the configuration for a mysql driver and include the driver package (a JBoss module) named <code>com.mysql.jdbc</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;layer-spec</span> <span style="color:#b48">xmlns</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">urn:jboss:galleon:layer-spec:1.0</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">mysql-driver</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;feature</span> <span style="color:#b48">spec</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">subsystem.datasources</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;feature</span> <span style="color:#b48">spec</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">subsystem.datasources.jdbc-driver</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">driver-name</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">mysql</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">jdbc-driver</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">mysql</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">driver-xa-datasource-class-name</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">com.mysql.jdbc.jdbc2.optional.MysqlXADataSource</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">driver-module-name</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">com.mysql.jdbc</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;/feature&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/feature&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;packages&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;package</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">com.mysql.jdbc</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/packages&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/layer-spec&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Documentation to help you define layers can be found <a href="https://docs.wildfly.org/galleon/#_layers">here</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_galleon_feature_groups">Galleon feature-groups</h5>
<div class="paragraph">
<p>You can define your own feature-groups that can then be re-used when defining configurations.</p>
</div>
<div class="paragraph">
<p>The directory <code>src/main/resources/feature_groups</code> contains the feature-groups definitions. A feature-group is defined inside the file <code>&lt;feature-group name&gt;.xml</code></p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;feature-group-spec</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">my-feature-group</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">urn:jboss:galleon:feature-group:1.0</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;feature-group</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">another-feature-group</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;feature</span> <span style="color:#b48">spec</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">interface</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">interface</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">my-interface</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;param</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">inet-address</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">192.168.1.1</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/feature&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/feature-group-spec&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Documentation to help you define feature-groups can be found <a href="https://docs.wildfly.org/galleon/#_feature_groups">here</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_galleon_default_configurations">Galleon default configurations</h5>
<div class="paragraph">
<p>You can define default configurations to be provisioned by galleon. Default configurations are defined in
 <code>src/main/resources/configs/&lt;config model&gt;/&lt;config name&gt;/config.xml</code> file. Configuration model can be one of <code>standalone</code>, <code>host</code> or <code>domain</code>.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;config</span> <span style="color:#b48">xmlns</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">urn:jboss:galleon:config:1.0</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">standalone.xml</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">model</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">standalone</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;layers&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;include</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">cloud-profile</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;include</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">my-layer</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/layers&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;feature-group</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">my-feature-group</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/config&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Documentation to help you define default configurations can be found <a href="https://docs.wildfly.org/galleon/#_provisioned_installation_configuration">here</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_build_feature_pack">3.4. build-feature-pack</h3>
<div class="sect3">
<h4 id="_wildfly_galleonbuild_feature_pack">3.4.1. wildfly-galleon:build-feature-pack</h4>
<div class="paragraph">
<p><strong>Full name:</strong>
org.wildfly.galleon-plugins:wildfly-galleon-maven-plugin:7.0.0.Final:build-feature-pack</p>
</div>
</div>
<div class="sect3">
<h4 id="_description_3">3.4.2. Description</h4>
<div class="paragraph">
<p>This Maven mojo creates a WildFly style feature-pack archive from
the provided resources according to the feature-pack build
configuration file and attaches it to the current Maven project as
an artifact. The content of the future feature-pack archive is
first created in the directory called <code>layout</code> under the module&#8217;s
build directory which is then ZIPped to create the feature-pack
artifact.</p>
</div>
</div>
<div class="sect3">
<h4 id="_attributes_3">3.4.3. Attributes</h4>
<div class="ulist">
<ul>
<li>
<p>Requires a Maven project to be executed.</p>
</li>
<li>
<p>Requires dependency resolution of artifacts in scope: <code>compile+runtime</code>.</p>
</li>
<li>
<p>Binds by default to the <a href="http://maven.apache.org/ref/current/maven-core/lifecycles.html">lifecycle phase</a>: <code>compile</code>.</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all fit-content stretch">
<caption class="title">Table 5. Required Parameters</caption>
<colgroup>
<col>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Since</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#featureSpecsOutput">[featureSpecsOutput]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>File</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The directory where the generated feature specs are written.<br>
<strong>Default value is</strong>: <code>${project.build.directory}/resources/features</code>.<br>
<strong>Alias is</strong>: <code>feature-specs-output</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#moduleTemplatesDir">[moduleTemplatesDir]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>File</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used only for feature spec generation and points to a directory
where the module templates from the dependent feature packs are
gathered before they are transformed and copied under their default
destination <code>wildflyHome</code>/modules. Intended mainly for
debugging.<br>
<strong>Default value is</strong>: <code>${project.build.directory}/module-templates</code>.<br>
<strong>User property is</strong>: <code>wfgp.moduleTemplatesDir</code>.<br>
<strong>Alias is</strong>: <code>module-templates</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#resourcesDir">[resourcesDir]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represents the directory containing child directories
<code>packages</code>, <code>feature_groups</code>,
<code>modules</code> etc. Either an absolute path or a path
relative to <code>configDir</code>.<br>
<strong>Default value is</strong>: <code>src/main/resources</code>.<br>
<strong>User property is</strong>: <code>wildfly.feature.pack.resourcesDir</code>.<br>
<strong>Alias is</strong>: <code>resources-dir</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#wildflyHome">[wildflyHome]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>File</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used only for feature spec generation and points to a directory
from which the embedded WildFly instance will be started that is
used for exporting the meta-model. Intended mainly for debugging.<br>
<strong>Default value is</strong>: <code>${project.build.directory}/wildfly</code>.<br>
<strong>User property is</strong>: <code>wfgp.wildflyHome</code>.<br>
<strong>Alias is</strong>: <code>wildfly-home</code>.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all fit-content stretch">
<caption class="title">Table 6. Optional Parameters</caption>
<colgroup>
<col>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Since</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#addFeaturePacksAsRequiredManifests">[addFeaturePacksAsRequiredManifests]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add any feature-pack dependency as a required manifest in the
manifest YAML definition. This parameter has no effect if
"generate-channel-manifest" is false.<br>
<strong>Default value is</strong>: <code>true</code>.<br>
<strong>Alias is</strong>: <code>add-feature-packs-as-required-manifests</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#buildName">[buildName]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The directory for the built artifact.<br>
<strong>Default value is</strong>: <code>${project.build.directory}</code>.<br>
<strong>User property is</strong>: <code>wildfly.feature.pack.buildName</code>.<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#configDir">[configDir]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>File</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The feature-pack build configuration file directory<br>
<strong>Default value is</strong>: <code>${basedir}</code>.<br>
<strong>User property is</strong>: <code>wildfly.feature.pack.configDir</code>.<br>
<strong>Alias is</strong>: <code>config-dir</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#configFile">[configFile]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The feature-pack build configuration file.<br>
<strong>Default value is</strong>: <code>wildfly-feature-pack-build.xml</code>.<br>
<strong>User property is</strong>: <code>wildfly.feature.pack.configFile</code>.<br>
<strong>Alias is</strong>: <code>config-file</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#configStatibilityLevel">[configStatibilityLevel]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The default stability level used at provisioning time to generate
configuration. Can&#8217;t be used when <code>stability-level</code> is
set.<br>
<strong>Alias is</strong>: <code>config-stability-level</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#deployChannelManifest">[deployChannelManifest]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(no description)<br>
<strong>Default value is</strong>: <code>true</code>.<br>
<strong>User property is</strong>: <code>wildfly.feature.pack.deploy-channel-manifest</code>.<br>
<strong>Alias is</strong>: <code>deploy-channel-manifest</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#forkEmbedded">[forkEmbedded]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used only for feature spec generation and indicates whether to
launch the embedded server to read feature descriptions in a
separate process<br>
<strong>Alias is</strong>: <code>fork-embedded</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#fpArtifactId">[fpArtifactId]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The artifactId for the generated feature-pack.<br>
<strong>Default value is</strong>: <code>${project.artifactId}</code>.<br>
<strong>Alias is</strong>: <code>feature-pack-artifact-id</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#generateChannelManifest">[generateChannelManifest]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generates a channel manifest YAML definition when the feature-pack
is produced. Any dependency from the feature pack is declared as a
stream in the channel manifest.<br>
<strong>Default value is</strong>: <code>false</code>.<br>
<strong>User property is</strong>: <code>wildfly.feature.pack.generate-channel-manifest</code>.<br>
<strong>Alias is</strong>: <code>generate-channel-manifest</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#minimumStabilityLevel">[minimumStabilityLevel]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The minimum stability level of the WildFly processes used to
generate feature specs and include packages. Set this if you need
to generate feature specs for features with a lower stability level
than the default level of the WildFly process being used for
feature-spec generation.<br>
<strong>Alias is</strong>: <code>minimum-stability-level</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#packageStatibilityLevel">[packageStatibilityLevel]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The default stability level used at provisioning time when
installing packages/JBoss Modules modules. Can&#8217;t be used when
<code>stability-level</code> is set.<br>
<strong>Alias is</strong>: <code>package-stability-level</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#releaseName">[releaseName]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the release the feature-pack represents which will be
stored in the feature-pack&#8217;s
<code>resources/wildfly/wildfly-tasks.properties</code> as
<code>product.release.name</code> property.<br>
<strong>Default value is</strong>: <code>${product.release.name}</code>.<br>
<strong>Alias is</strong>: <code>release-name</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#stabilityLevel">[stabilityLevel]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The default stability level used at provisioning time to generate
configuration and provision packages. Can&#8217;t be used when
<code>config-stability-level</code> or
<code>package-stability-level</code> is set.<br>
<strong>Alias is</strong>: <code>stability-level</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#taskProps">[taskProps]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Map</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Various properties that will be added to feature-pack&#8217;s
<code>resources/wildfly/wildfly-tasks.properties</code>.<br>
NOTE: values of this parameter will overwrite the corresponding
values from task-properties-file parameter, in case it&#8217;s also
set. +<br>
<strong>Alias is</strong>: <code>task-properties</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#taskPropsFile">[taskPropsFile]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>File</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to a properties file content of which will be added to
feature-pack&#8217;s <code>resources/wildfly/wildfly-tasks.properties</code> file
that is used as the source of properties during file copying tasks
with property replacement.<br>
<strong>Alias is</strong>: <code>task-properties-file</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#wildflyChannelResolutionMode">[wildflyChannelResolutionMode]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WildFlyChannelResolutionMode</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Feature-pack WildFly channel resolution mode when WildFly channels
are configured in the provisioning tooling used to provision this
feature-pack. "NOT_REQUIRED" means that the feature-pack and
artifacts can be resolved without WildFly channels. "REQUIRED"
means that the feature-pack and all its artifacts must be only
resolved from WildFly channels. "REQUIRED_FP_ONLY" means that only
the feature-pack must be only resolved from WildFly channels.
Referenced artifacts can be resolved outside of configured WildFly
channels.<br>
<strong>Default value is</strong>: <code>NOT_REQUIRED</code>.<br>
<strong>User property is</strong>: <code>wildfly.feature.pack.require.channel.resolution</code>.<br>
<strong>Alias is</strong>: <code>wildfly-channel-resolution-mode</code>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_parameter_details_3">3.4.4. Parameter Details</h4>
<div class="paragraph">
<p><a id="addFeaturePacksAsRequiredManifests"></a> <strong>addFeaturePacksAsRequiredManifests</strong><br>
Add any feature-pack dependency as a required manifest in the
manifest YAML definition. This parameter has no effect if
"generate-channel-manifest" is false.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>boolean</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>Default</strong>: <code>true</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>add-feature-packs-as-required-manifests</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="buildName"></a> <strong>buildName</strong><br>
The directory for the built artifact.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.lang.String</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>wildfly.feature.pack.buildName</code></p>
</li>
<li>
<p><strong>Default</strong>: <code>${project.build.directory}</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="configDir"></a> <strong>configDir</strong><br>
The feature-pack build configuration file directory</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.io.File</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>wildfly.feature.pack.configDir</code></p>
</li>
<li>
<p><strong>Default</strong>: <code>${basedir}</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>config-dir</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="configFile"></a> <strong>configFile</strong><br>
The feature-pack build configuration file.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.lang.String</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>wildfly.feature.pack.configFile</code></p>
</li>
<li>
<p><strong>Default</strong>: <code>wildfly-feature-pack-build.xml</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>config-file</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="configStatibilityLevel"></a> <strong>configStatibilityLevel</strong><br>
The default stability level used at provisioning time to generate
configuration. Can&#8217;t be used when <code>stability-level</code> is
set.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.lang.String</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>config-stability-level</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="deployChannelManifest"></a> <strong>deployChannelManifest</strong><br>
(no description)</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>boolean</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>wildfly.feature.pack.deploy-channel-manifest</code></p>
</li>
<li>
<p><strong>Default</strong>: <code>true</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>deploy-channel-manifest</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="featureSpecsOutput"></a> <strong>featureSpecsOutput</strong><br>
The directory where the generated feature specs are written.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.io.File</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>Yes</code></p>
</li>
<li>
<p><strong>Default</strong>: <code>${project.build.directory}/resources/features</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>feature-specs-output</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="forkEmbedded"></a> <strong>forkEmbedded</strong><br>
Used only for feature spec generation and indicates whether to
launch the embedded server to read feature descriptions in a
separate process</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>boolean</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>fork-embedded</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="fpArtifactId"></a> <strong>fpArtifactId</strong><br>
The artifactId for the generated feature-pack.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.lang.String</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>Default</strong>: <code>${project.artifactId}</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>feature-pack-artifact-id</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="generateChannelManifest"></a> <strong>generateChannelManifest</strong><br>
Generates a channel manifest YAML definition when the feature-pack
is produced. Any dependency from the feature pack is declared as a
stream in the channel manifest.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>boolean</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>wildfly.feature.pack.generate-channel-manifest</code></p>
</li>
<li>
<p><strong>Default</strong>: <code>false</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>generate-channel-manifest</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="minimumStabilityLevel"></a> <strong>minimumStabilityLevel</strong><br>
The minimum stability level of the WildFly processes used to
generate feature specs and include packages. Set this if you need
to generate feature specs for features with a lower stability level
than the default level of the WildFly process being used for
feature-spec generation.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.lang.String</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>minimum-stability-level</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="moduleTemplatesDir"></a> <strong>moduleTemplatesDir</strong><br>
Used only for feature spec generation and points to a directory
where the module templates from the dependent feature packs are
gathered before they are transformed and copied under their default
destination <code>wildflyHome</code>/modules. Intended mainly for
debugging.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.io.File</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>Yes</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>wfgp.moduleTemplatesDir</code></p>
</li>
<li>
<p><strong>Default</strong>: <code>${project.build.directory}/module-templates</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>module-templates</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="packageStatibilityLevel"></a> <strong>packageStatibilityLevel</strong><br>
The default stability level used at provisioning time when
installing packages/JBoss Modules modules. Can&#8217;t be used when
<code>stability-level</code> is set.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.lang.String</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>package-stability-level</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="releaseName"></a> <strong>releaseName</strong><br>
The name of the release the feature-pack represents which will be
stored in the feature-pack&#8217;s
<code>resources/wildfly/wildfly-tasks.properties</code> as
<code>product.release.name</code> property.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.lang.String</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>Default</strong>: <code>${product.release.name}</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>release-name</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="resourcesDir"></a> <strong>resourcesDir</strong><br>
Represents the directory containing child directories
<code>packages</code>, <code>feature_groups</code>,
<code>modules</code> etc. Either an absolute path or a path
relative to <code>configDir</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.lang.String</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>Yes</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>wildfly.feature.pack.resourcesDir</code></p>
</li>
<li>
<p><strong>Default</strong>: <code>src/main/resources</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>resources-dir</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="stabilityLevel"></a> <strong>stabilityLevel</strong><br>
The default stability level used at provisioning time to generate
configuration and provision packages. Can&#8217;t be used when
<code>config-stability-level</code> or
<code>package-stability-level</code> is set.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.lang.String</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>stability-level</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="taskProps"></a> <strong>taskProps</strong><br>
Various properties that will be added to feature-pack&#8217;s
<code>resources/wildfly/wildfly-tasks.properties</code>.<br>
NOTE: values of this parameter will overwrite the corresponding
values from task-properties-file parameter, in case it&#8217;s also
set.<br></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.util.Map</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>task-properties</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="taskPropsFile"></a> <strong>taskPropsFile</strong><br>
Path to a properties file content of which will be added to
feature-pack&#8217;s <code>resources/wildfly/wildfly-tasks.properties</code> file
that is used as the source of properties during file copying tasks
with property replacement.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.io.File</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>task-properties-file</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="wildflyChannelResolutionMode"></a> <strong>wildflyChannelResolutionMode</strong><br>
Feature-pack WildFly channel resolution mode when WildFly channels
are configured in the provisioning tooling used to provision this
feature-pack. "NOT_REQUIRED" means that the feature-pack and
artifacts can be resolved without WildFly channels. "REQUIRED"
means that the feature-pack and all its artifacts must be only
resolved from WildFly channels. "REQUIRED_FP_ONLY" means that only
the feature-pack must be only resolved from WildFly channels.
Referenced artifacts can be resolved outside of configured WildFly
channels.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>org.wildfly.galleon.plugin.WildFlyChannelResolutionMode</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>No</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>wildfly.feature.pack.require.channel.resolution</code></p>
</li>
<li>
<p><strong>Default</strong>: <code>NOT_REQUIRED</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>wildfly-channel-resolution-mode</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="wildflyHome"></a> <strong>wildflyHome</strong><br>
Used only for feature spec generation and points to a directory
from which the embedded WildFly instance will be started that is
used for exporting the meta-model. Intended mainly for debugging.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type</strong>: <code>java.io.File</code></p>
</li>
<li>
<p><strong>Required</strong>: <code>Yes</code></p>
</li>
<li>
<p><strong>User Property</strong>: <code>wfgp.wildflyHome</code></p>
</li>
<li>
<p><strong>Default</strong>: <code>${project.build.directory}/wildfly</code></p>
</li>
<li>
<p><strong>Alias</strong>: <code>wildfly-home</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_feature_pack_packages">3.4.5. Feature-pack packages</h4>
<div class="paragraph">
<p>The Maven project module which creates a feature-pack may describe its packages and/or provide more data for the packages generated from JBoss modules in the Maven module&#8217;s <code>src/main/resources/packages</code>.</p>
</div>
<div class="paragraph">
<p>Every child directory of <code>src/main/resources/packages</code> represents a package with the directory name being the package name. The content of the package directory is going to be copied to the corresponding package directory in the feature-pack.</p>
</div>
<div class="paragraph">
<p>The usual package directory structure is:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>package_name
|- content/
|- pm/
|  `- wildfly/
|     `- tasks.xml
`- package.xml</pre>
</div>
</div>
<div class="paragraph">
<p>In general, the only required child of the package directory is <code>package.xml</code>.</p>
</div>
<div class="paragraph">
<p>Package content directory includes content that will be copied to the installation root directory when the package is installed.</p>
</div>
<div class="paragraph">
<p><code>pm/wildfly/tasks.xml</code> file is optional, it may include instructions to copy and/or delete files and directories, create directories, resolve and copy Maven artifacts to the installation directory, etc. These tasks are executed when the content of all the packages has been copied into the installation.</p>
</div>
<div class="paragraph">
<p>The tasks <a href="https://raw.githubusercontent.com/wildfly/galleon-plugins/master/maven-plugin/src/main/resources/schema/wildfly-feature-pack-tasks-3_0.xsd">XML schema</a> contains the definition of the tasks you can add to the tasks.xml file.
This <a href="https://raw.githubusercontent.com/wildfly/galleon-plugins/master/maven-plugin/src/test/resources/xml/tasks.xml">example</a> of tasks.xml file contains the set of tasks one can use in a tasks.xml file.</p>
</div>
</div>
<div class="sect3">
<h4 id="_generating_jboss_module_packages">3.4.6. Generating JBoss module packages</h4>
<div class="paragraph">
<p>JBoss modules of the distribution are turned into feature-pack packages. A package is created per JBoss module. JBoss module dependencies are reflected in the corresponding package dependencies.</p>
</div>
<div class="paragraph">
<p>JBoss modules packages don&#8217;t have to be manually described in <code>src/main/resources/packages</code>.</p>
</div>
<div class="paragraph">
<p>Traditionally, WildFly-based builds use <code>module.xml</code> templates to generate the final <code>module.xml</code> files based on the distribution type selected: <strong>thin</strong> (when the JBoss module artifacts are loaded directly from the Maven repository at runtime) or <strong>thick</strong> (when the JBoss module artifacts are resolved and copied to the distribution directory at provisioning time).</p>
</div>
<div class="paragraph">
<p>The Maven module that is building a feature-pack may include <code>src/main/resources/modules/system/layers</code> directory containing <code>module.xml</code> templates. The mojo will read those and generate a package per <code>module.xml</code>.</p>
</div>
<div class="paragraph">
<p>For example, here is an excerpt from a <code>module.xml</code> template:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;module</span> <span style="color:#b48">xmlns</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">urn:jboss:module:1.8</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">org.jboss.as.jmx</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;properties&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;property</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">jboss.api</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">private</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/properties&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;exports&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;exclude</span> <span style="color:#b48">path</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">org/jboss/as/jmx/logging</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/exports&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;resources&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;artifact</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">${org.wildfly.core:wildfly-jmx}</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/resources&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;dependencies&gt;</span>
        <span style="color:#777">&lt;!-- skipped content --&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It looks pretty much like the final <code>module.xml</code> except that the artifact name is an expression which should be replaced with either the complete artifact coordinates in case of a thin distribution, e.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;module</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">org.jboss.as.jmx</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">urn:jboss:module:1.8</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;properties&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;property</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">jboss.api</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">private</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/properties&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;exports&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;exclude</span> <span style="color:#b48">path</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">org/jboss/as/jmx/logging</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/exports&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;resources&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;artifact</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">org.wildfly.core:wildfly-jmx:5.0.0.Beta3-SNAPSHOT</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/resources&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;dependencies&gt;</span>
        <span style="color:#777">&lt;!-- skipped content --&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the <code>resource-root</code> element in case of a thick distribution, e.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;module</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">org.jboss.as.jmx</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">urn:jboss:module:1.8</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;properties&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;property</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">jboss.api</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">private</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/properties&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;exports&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;exclude</span> <span style="color:#b48">path</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">org/jboss/as/jmx/logging</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/exports&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;resources&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;resource-root</span> <span style="color:#b48">path</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">wildfly-jmx-5.0.0.Beta3-SNAPSHOT.jar</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/resources&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;dependencies&gt;</span>
        <span style="color:#777">&lt;!-- skipped content --&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>module.xml</code> template processing is happening at provisioning time and depends on the kind of distribution being provisioned.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
It is possible that a module depends on another module which is not found in the current feature-pack. In that case, the feature-pack that contains the package representing the module from the dependency must be declared as the dependency of the current feature-pack in the feature-pack build config file. If the dependency could not be resolved locally (among the modules included in the current feature-pack), the module will be looked up in the dependencies of the current feature-pack (in the order the dependencies are specified in the feature-pack build config file).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In case a module dependency could not be resolved neither locally nor in the feature-pack dependencies, an error will be thrown with the corresponding message.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The package generated for a JBoss module can still be customized by, e.g., adding <code>pm/wildfly/tasks.xml</code> to it in <code>src/main/resources/packages</code>. In this case the package dir in <code>src/main/resources/packages</code> has to include only the content that the generated package is missing. It doesn&#8217;t have to include <code>package.xml</code> unless the generated one has to be replaced with a custom one.
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_modules_all_package">modules.all package</h5>
<div class="paragraph">
<p>If a feature-pack includes JBoss modules, in addition to the module packages, the mojo will generate a package called <code>modules.all</code>. This package will not contain any content but will simply depend on all the module packages generated for this feature-pack. This package exists for convenience only to be able to install all the modules from the feature-pack (and its dependencies) by including a single package.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Original WildFly feature-packs include <code>modules.all</code> into the default package list at the moment to follow the legacy approach of building distributions. This is configured in the feature-pack build config file.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Feature-pack-build-config-file">3.5. Feature-pack build config file (wildfly-feature-pack-build.xml)</h3>
<div class="paragraph">
<p>Feature-pack building starts with this file. The file describes the feature-pack in terms of its dependencies on other
feature-packs, default packages, configs and other options such as from which artifact groups to extract schemas into
the distribution&#8217;s <code>docs/schema</code> directory.</p>
</div>
<div class="paragraph">
<p>If the file includes feature-pack dependencies, those feature-packs must be resolvable as Maven artifacts during the
build process. They will be explored to collect the provisioning descriptions (such as feature-pack.xml, etc) of the
dependencies.</p>
</div>
<div class="paragraph">
<p>Normally, most of the content of this file will be copied directly into the final <code>feature-pack.xml</code> generated by the mojo.
Here is an example from WildFly Servlet feature-pack build config file</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;build</span> <span style="color:#b48">xmlns</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">urn:wildfly:feature-pack-build:3.0</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">producer</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">wildfly-servlet@maven(org.jboss.universe:community-universe):current</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;dependencies&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;dependency</span> <span style="color:#b48">group-id</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">org.wildfly.core</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">artifact-id</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">wildfly-core-galleon-pack</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;name&gt;</span>org.wildfly.core:wildfly-core-galleon-pack<span style="color:#070;font-weight:bold">&lt;/name&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;packages</span> <span style="color:#b48">inherit</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">false</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;exclude</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">product.conf</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;/packages&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;default-configs</span> <span style="color:#b48">inherit</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">false</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;/dependency&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/dependencies&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;default-packages&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;package</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">modules.all</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;package</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">docs</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/default-packages&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;package-schemas&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;group</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">org.jboss.as</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;group</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">org.wildfly</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;group</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">org.wildfly.core</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/package-schemas&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;config</span> <span style="color:#b48">model</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">standalone</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;packages&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;package</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">product.conf</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">optional</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">true</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;package</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">misc.standalone</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;/packages&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/config&gt;</span>

    <span style="color:#777">&lt;!-- other configs are skipped --&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;generate-feature-specs&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;extensions&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;standalone&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;extension&gt;</span>org.jboss.as.ee<span style="color:#070;font-weight:bold">&lt;/extension&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;extension&gt;</span>org.jboss.as.naming<span style="color:#070;font-weight:bold">&lt;/extension&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;extension&gt;</span>org.jboss.as.security<span style="color:#070;font-weight:bold">&lt;/extension&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;extension&gt;</span>org.wildfly.extension.undertow<span style="color:#070;font-weight:bold">&lt;/extension&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;/standalone&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;domain&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;extension&gt;</span>org.jboss.as.ee<span style="color:#070;font-weight:bold">&lt;/extension&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;extension&gt;</span>org.jboss.as.naming<span style="color:#070;font-weight:bold">&lt;/extension&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;extension&gt;</span>org.jboss.as.security<span style="color:#070;font-weight:bold">&lt;/extension&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;extension&gt;</span>org.wildfly.extension.undertow<span style="color:#070;font-weight:bold">&lt;/extension&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;/domain&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;/extensions&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/generate-feature-specs&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/build&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>All the elements in the above example except for package-schemas and <code>generate-feature-specs</code> are actual <code>feature-pack.xml</code> content that will be
copied to the resulting feature-pack.xml as-is.</p>
</div>
<div class="sect4">
<h5 id="_extracting_schemas">Extracting schemas</h5>
<div class="paragraph">
<p>The presence of element <code>package-schemas</code> instructs the mojo to create a package called <code>docs.schema</code>. The package
includes no content but a file with Maven artifact groupIds from which XSD schemas should be extracted into the
distribution&#8217;s docs/schema directory, in case <code>docs.schema</code> package was selected to be installed (it is by default).</p>
</div>
</div>
<div class="sect4">
<h5 id="_feature_specs_generation">Feature specs generation</h5>
<div class="paragraph">
<p>Feature-pack may or may not include feature specs (XML files describing configuration features). Feature specs are included only if the feature-pack includes one or more subsystems that should be added to the confuration when the feature-pack is installed.</p>
</div>
<div class="paragraph">
<p>In WildFly feature-packs, feature specs are generated. <code>generate-feature-specs</code> is an element that lists extensions included in the feature-pack for which feature specs should be generated.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
feature specs are generated using <code>generate-feature-specs</code> goal of the plugin.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_adding_provisioning_plugins">Adding provisioning plugins</h5>
<div class="paragraph">
<p>Feature-packs that depend on WildFly (or WildFly Core), normally, don&#8217;t need to add any provisioning plugins to be usable by Galleon. WildFly Core feature-pack includes the plugins that are used during provisioning for all the feature-packs that (directly or indirectly) depend on it. Here is a snipped from WildFly Core <code>wildfly-feature-pack-build.xml</code> that adds WildFly provisioning plugin JARs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;build</span> <span style="color:#b48">xmlns</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">urn:wildfly:feature-pack-build:3.0</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">producer</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">wildfly-core@maven(org.jboss.universe:community-universe):current</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#777">&lt;!-- content skipped --&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;plugins&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;plugin</span> <span style="color:#b48">artifact</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">org.wildfly.galleon-plugins:wildfly-galleon-plugins</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span style="color:#070;font-weight:bold">&lt;/plugins&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;resources&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;copy</span> <span style="color:#b48">artifact</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">org.wildfly.galleon-plugins:wildfly-config-gen</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">to</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">wildfly/wildfly-config-gen.jar</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span style="color:#070;font-weight:bold">&lt;/resources&gt;</span>

    <span style="color:#777">&lt;!-- content skipped --&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/build&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>plugins</code> element may include multiple <code>plugin</code> elements specifying Maven artifact coordinates of the plugin</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>copy</code> element under <code>resources</code> instructs to copy the specified artifact to the feature-pack <code>resources</code> directory</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Both artifact coordinates above are missing versions. Although the versions could specified, in this case they will be resolved from the Maven project dependencies at the plugin execution time.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 7.0.0.Final<br>
Last updated 2024-02-16 12:17:43 +0100
</div>
</div>
</body>
</html>